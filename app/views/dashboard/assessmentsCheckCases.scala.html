@*
 * Copyright 2018 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import actions.AuthenticatedRequest
@import utils.Formatters
@import config.ApplicationConfig
@import uk.gov.hmrc.play.views.html.helpers.form

@(model: controllers.AssessmentsVM)(implicit request: AuthenticatedRequest[_], messages: Messages, config: ApplicationConfig)


@checkCasesSize = @{model.checkCases.fold(0)(_.filterTotal)}

@main_template(
    title = Messages("property.details.title"),
    topBackLink = true,
    bottomBackLink = true,
    individualId = Some(request.personId),
    backLinkUrl = Some(routes.Dashboard.home().url)
) {
    <h1 class="heading-xlarge margin-bottom-0 clear-right">
    @Messages("property.details.title")
    </h1>

    <h2 class="heading-secondary">@(Formatters.capitalizedAddress(model.assessments.head.address))</h2>


    <p>@Messages("property.details.p1")</p>

    <ul class="list list-bullet">
        <li>@if(model.assessments.size == 1){
                @Messages("property.details.li.valuation", 1)
            }else{
                @Messages("property.details.li.valuations", model.assessments.size)
            }
        </li>

        @if(checkCasesSize > 0) {

            <li>@Messages("property.details.li.case.text", checkCasesSize) </li>
        }
    </ul>
    <p>@Messages("property.details.p2")</p>
    <details class="print-hide">
        <summary role="button" aria-controls="details-content-1" aria-expanded="false">
            <span class="summary">@Messages("property.details.div.what.is")</span>
        </summary>
        <div id="details-content-1">
            <p>@Messages("property.details.div.what.is.p1")</p>
            <p>@Messages("property.details.div.what.is.p2")</p>
        </div>
    </details>
    @assessmentDetails(model)
    @if(checkCasesSize > 0) {
        @checkCasesDetails(model)
    }
}